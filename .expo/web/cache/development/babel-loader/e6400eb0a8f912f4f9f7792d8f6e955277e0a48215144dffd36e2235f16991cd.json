{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { ably } from \"../env\";\nvar CHANNEL_NAME = \"[product:ably-flightradar24/heathrow-flights]flights:airport:LHR\";\nexport var useAblyChannel = function useAblyChannel(channel, dependencies) {\n  var _useState = useState(\"Please wait..\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    onMessage = _useState2[0],\n    setOnMessage = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    channelData = _useState6[0],\n    setChannelData = _useState6[1];\n  useEffect(function () {\n    console.log(\"Ran Use Effects\", channel);\n    ably.connection.on(function (stateChange) {\n      console.log(\"New connection state is \" + stateChange.current);\n      setOnMessage(stateChange.current);\n      setLoading(true);\n    });\n    var useChannel = ably.channels.get(CHANNEL_NAME + \":\" + channel);\n    useChannel.subscribe(function (message) {\n      if (message.data.length > 0) {\n        setOnMessage(\"Loading Data...\");\n        setLoading(false);\n        setChannelData(message.data);\n      }\n    });\n  }, dependencies);\n  return [isLoading, onMessage, channelData];\n};","map":{"version":3,"names":["useState","useEffect","ably","CHANNEL_NAME","useAblyChannel","channel","dependencies","_useState","_useState2","_slicedToArray","onMessage","setOnMessage","_useState3","_useState4","isLoading","setLoading","_useState5","_useState6","channelData","setChannelData","console","log","connection","on","stateChange","current","useChannel","channels","get","subscribe","message","data","length"],"sources":["/Users/sammerinio/Documents/flight-tracking-app/hooks/ably.hooks.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { ably } from \"../env\";\n\n//set CHANNEL_SCOPE  channel\nconst CHANNEL_NAME =\n  \"[product:ably-flightradar24/heathrow-flights]flights:airport:LHR\";\nexport const useAblyChannel = (channel, dependencies) => {\n  const [onMessage, setOnMessage] = useState(\"Please wait..\");\n\n  const [isLoading, setLoading] = useState(true);\n  //fetch channel data\n  const [channelData, setChannelData] = useState(null);\n\n  useEffect(() => {\n    //add ably connection here\n    console.log(\"Ran Use Effects\", channel);\n    // know the current state of the application\n    ably.connection.on(function (stateChange) {\n      console.log(\"New connection state is \" + stateChange.current);\n      setOnMessage(stateChange.current);\n      setLoading(true);\n    });\n    // use the channel scope in the application\n    const useChannel = ably.channels.get(`${CHANNEL_NAME}:${channel}`);\n    useChannel.subscribe((message) => {\n      if (message.data.length > 0) {\n        setOnMessage(\"Loading Data...\");\n        setLoading(false);\n        setChannelData(message.data);\n      }\n    });\n  }, dependencies);\n\n  return [isLoading, onMessage, channelData];\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI;AAGb,IAAMC,YAAY,GAChB,kEAAkE;AACpE,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,OAAO,EAAEC,YAAY,EAAK;EAAA,IAAAC,SAAA,GACrBP,QAAQ,CAAC,eAAe,CAAC;IAAAQ,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAApDG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAAA,IAAAI,UAAA,GAEEZ,QAAQ,CAAC,IAAI,CAAC;IAAAa,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAvCE,SAAS,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAAA,IAAAG,UAAA,GAEUhB,QAAQ,CAAC,IAAI,CAAC;IAAAiB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA7CE,WAAW,GAAAD,UAAA;IAAEE,cAAc,GAAAF,UAAA;EAElChB,SAAS,CAAC,YAAM;IAEdmB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEhB,OAAO,CAAC;IAEvCH,IAAI,CAACoB,UAAU,CAACC,EAAE,CAAC,UAAUC,WAAW,EAAE;MACxCJ,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAGG,WAAW,CAACC,OAAO,CAAC;MAC7Dd,YAAY,CAACa,WAAW,CAACC,OAAO,CAAC;MACjCV,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC;IAEF,IAAMW,UAAU,GAAGxB,IAAI,CAACyB,QAAQ,CAACC,GAAG,CAAIzB,YAAY,SAAIE,OAAO,CAAG;IAClEqB,UAAU,CAACG,SAAS,CAAC,UAACC,OAAO,EAAK;MAChC,IAAIA,OAAO,CAACC,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QAC3BrB,YAAY,CAAC,iBAAiB,CAAC;QAC/BI,UAAU,CAAC,KAAK,CAAC;QACjBI,cAAc,CAACW,OAAO,CAACC,IAAI,CAAC;MAC9B;IACF,CAAC,CAAC;EACJ,CAAC,EAAEzB,YAAY,CAAC;EAEhB,OAAO,CAACQ,SAAS,EAAEJ,SAAS,EAAEQ,WAAW,CAAC;AAC5C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}